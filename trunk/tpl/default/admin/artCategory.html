<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Article Category</title>
    <!--block design1-->
    <link href="../css/adminCommon.css" rel="stylesheet" type="text/css"/>
    <link href="../css/adminFun.css" rel="stylesheet" type="text/css"/>
    <script language="javascript" type="text/javascript" src="../../../JObj/JObj.js"></script>
    <!--/block-->
    <link href="{@PATH_CONTENT_ROOT}tpl/default/css/adminCommon.css" rel="stylesheet" type="text/css">
    <link href="{@PATH_CONTENT_ROOT}tpl/default/css/adminFun.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="{@PATH_CONTENT_ROOT}JObj/JObj.js"></script>
</head>

<body>
<div class="btnGrp_sliveGray">
    <div class="left"></div>
    <div class="body"><a href="javascript:showWin()">Goto Category...</a></div>
    <div class="separator"></div>
    <div class="body"><a href="javascript:addNew()">Add</a></div>
    <div class="separator"></div>
    <div class="body">Back</div>
    <div class="right"></div>
</div>
<div class="clearBoth">
    <form action="{:action}" method="post">
        <input type="hidden" name="token" value="{@GToken::newToken(" artCategory")}" />
        <table border="0">
            <tr>
                <td>ID</td>
                <td>Category Name</td>
                <td>Parent Category Name</td>
                <td>Sub Category Num</td>
                <td>Artegory Num</td>
                <td>Delete</td>
            </tr>
            <!--block blk_list-->
            <tr>
                <td>{:id}<input type="hidden" name="id[{:idx}]" value="{:id}"/></td>
                <td><input type="text" name="name[{:idx}]" value="{:name}"/><input type="hidden" name="_name[{:idx}]"
                                                                                   value="{:name}"/></td>
                <td>
                    <div class="btnGrp_sliveGray">
                        <div class="left"></div>
                        <div class="body">{:catNamePath}</div>
                        <div class="separator"></div>
                        <div class="body">Reset</div>
                        <div class="right"></div>
                    </div>
                    <input type="hidden" name="faId[{:idx}]" value="{:faid}"/>
                </td>
                <td>{:subNum}&nbsp;</td>
                <td>{:artNum}&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
            <!--/block-->
            <tr id="newTr">
                <td>*</td>
                <td><input type="text" name="name[{:idx}]" value=""/></td>
                <td colspan="4">
                    <div class="btnGrp_sliveGray">
                        <div class="left"></div>
                        <div class="body">Select Parent Category...</div>
                        <div class="separator"></div>
                        <div class="body">Clear</div>
                        <div class="right"></div>
                    </div>
                    <input type="hidden" name="faId[{:idx}]" value=""/>
                </td>
            </tr>
        </table>
        <input type="submit" value="Submit"/>
    </form>
</div>

<script>
    var idx = {:idx};
    var addNew = function() {
        var tpl = JObj.$("newTr");
        var tr = tpl.cloneNode(true);
        tr.removeAttribute("id");
        tpl.parentNode.appendChild(tr);
        tr.innerHTML = (tr.innerHTML.replace(/\[(\d*)\]/g, "[" + ++idx + "]"));
    }

    JObj.plugin("JWin", false);
    JObj.plugin("JTree", false);

    var jwin = null;
    var showWin = function(){
        if(jwin == null){
            jwin = JObj.Plugin.JWin.getInstance(500,300);
            jwin.setTitle("Usnower...");
            jwin.setSysButtons(false,true,true);
            jwin.setDrag(true);
        }
        jwin.showModal();
    }
</script>
</body>
</html>
